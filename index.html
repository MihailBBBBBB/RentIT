<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RentIT</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
  <link rel="stylesheet" href="css/index.css">
  <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="brand">
      <img src="https://cdn-icons-png.flaticon.com/512/742/742751.png" alt="Logo" />
      <strong>RentIT</strong>
    </div>
    <nav class="nav">
      <a href="#" class="nav-link active">Home</a>
      <a href="#popular-h" class="nav-link">Popular</a>
      <a href="offers.html" class="nav-link">Catalog</a>
      <a href="#map" class="nav-link">Map</a>
      <a href="support_ticket.html" class="nav-link">Support</a>
      <a href="#" class="nav-link">Donate</a>
    </nav>
    <div class="account">
      <div class="balance">0.00 ‚Ç¨</div>
      <button class="btn topup">Top up</button>
      <button class="btn primary login">Login / Register</button>
    </div>
  </header>

  <div class="container">
    <header class="header-block">
      <!-- –õ–µ–≤–∞—è —á–∞—Å—Ç—å -->
      <div class="header-left">
        <h1>Book the Perfect Spot with RentIT</h1>
        <p>Restaurants, bars, billiard halls, clubs, gyms ‚Äî discover, compare, and reserve instantly. Reviews, likes, secure balance top-ups, and PDF receipts included.</p>

        <div class="filters">
          <input type="text" placeholder="Try: Restaurant, Club..." />
          <select>
            <option value="">All</option>
            <option>Restaurant</option>
            <option>Bar</option>
            <option>Gym</option>
            <option>Club</option>
          </select>
          <select>
            <option>All Ratings</option>
            <option>‚òÖ 4+</option>
            <option>‚òÖ 3+</option>
          </select>
          <select>
            <option>Popular</option>
            <option>Rating High ‚Üí Low</option>
            <option>Price Low ‚Üí High</option>
          </select>
          <button class="btn primary">Apply Filters</button>
          <a href="offers.html">Browse All</a>
        </div>

        <div class="verified-info">
          <span>‚≠ê Verified Reviews</span>
          <span>üìç Map View</span>
          <span>üìÑ PDF Receipts</span>
        </div>
      </div>

      <!-- –ü—Ä–∞–≤–∞—è —á–∞—Å—Ç—å -->
      <div class="header-right">
        <img src="https://images.unsplash.com/photo-1541542684-3b7b49d4f6b2?q=80&w=1400&auto=format&fit=crop" alt="Restaurant" />
      </div>
    </header>

    <!-- Popular -->
    <section class="section">
      <h3 id="popular-h">Most Popular Venues</h3>
      <div id="popular" class="popular"></div>
    </section>

    <!-- Catalog -->
    <section class="section">
      <h3>Venue Catalog</h3>
      <div id="catalog" class="catalog"></div>
    </section>

    <!-- Map -->
    <section class="map-wrap">
      <div id="map"></div>
      <aside class="nearby">
        <h4>Map & Nearby</h4>
        <div id="nearbyList"></div>
      </aside>
    </section>
  </div>

  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script>
    // Fake auth toggle
    function login(){
      document.getElementById("navGuest").style.display="none";
      document.getElementById("navUser").style.display="flex";
    }

    const venues = [
      {id:1,name:"Iron Forge Gym",category:"Gym",rating:4.7,price:20,popular:true,
       address:"Alexanderplatz 7, Berlin",img:"https://images.unsplash.com/photo-1546484959-f606fbfbe0d9?q=80&w=600",lat:52.52,lng:13.41},
      {id:2,name:"Emerald Billiards",category:"Bar",rating:4.3,price:30,popular:true,
       address:"Rosenstra√üe 42, Berlin",img:"https://images.unsplash.com/photo-1496307042754-b4aa456c4a2d?q=80&w=600",lat:52.519,lng:13.406},
      {id:3,name:"Blue Orchid Restaurant",category:"Restaurant",rating:4.8,price:45,popular:true,
       address:"Friedrichstra√üe 45, Berlin",img:"https://images.unsplash.com/photo-1528605248644-14dd04022da1?q=80&w=600",lat:52.52,lng:13.39},
      {id:4,name:"Golden Tap Bar",category:"Bar",rating:4.1,price:22,popular:false,
       address:"Oranienburger Str. 21, Berlin",img:"https://images.unsplash.com/photo-1504674900247-0877df9cc836?q=80&w=600",lat:52.521,lng:13.39},
      {id:5,name:"Neon Night Club",category:"Club",rating:4.6,price:35,popular:true,
       address:"Revaler Str. 99, Berlin",img:"https://images.unsplash.com/photo-1506159433264-53e4d0a3f8b9?q=80&w=600",lat:52.503,lng:13.449},
      {id:6,name:"Riverside Dine",category:"Restaurant",rating:4.2,price:40,popular:false,
       address:"Bankside 12, Berlin",img:"https://images.unsplash.com/photo-1504754524776-8f4f37790ca0?q=80&w=600",lat:52.507,lng:13.39}
    ];

    function renderPopular(list){
      const el=document.getElementById("popular");el.innerHTML="";
      list.filter(v=>v.popular).forEach(v=>{
        el.innerHTML+=`
          <div class="pop-card">
            <img src="${v.img}" alt="${v.name}">
            <div class="info">
              <h4>${v.name}</h4>
              <div class="meta">${v.category} ‚Ä¢ ${v.rating} ‚≠ê</div>
              <div class="meta">${v.address}</div>
            </div>
          </div>`;
      });
    }

    function renderCatalog(list){
      const el=document.getElementById("catalog");el.innerHTML="";
      list.forEach(v=>{
        el.innerHTML+=`
          <div class="card">
            <img src="${v.img}" alt="${v.name}">
            <div class="content">
              <div>
                <h4>${v.name}</h4>
                <div class="meta">${v.category} ‚Ä¢ ${v.address}</div>
              </div>
              <div class="bottom">
                <div class="price">‚Ç¨${v.price} / hr</div>
                <button class="btn primary">Book</button>
              </div>
            </div>
          </div>`;
      });
    }

    function renderNearby(list){
      const el=document.getElementById("nearbyList");el.innerHTML="";
      list.forEach(v=>{
        el.innerHTML+=`
          <div class="item">
            <img src="${v.img}" alt="${v.name}">
            <div>
              <div style="font-weight:600">${v.name}</div>
              <div class="meta">${v.category} ‚Ä¢ ${v.rating} ‚≠ê</div>
              <div class="meta">${v.address}</div>
            </div>
          </div>`;
      });
    }

    function initMap(list){
      const map=L.map('map').setView([52.52,13.405],12);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
      list.forEach(v=>{
        L.marker([v.lat,v.lng]).addTo(map).bindPopup(`<b>${v.name}</b><br>${v.category} ‚Ä¢ ${v.rating}‚≠ê`);
      });
    }

    document.addEventListener("DOMContentLoaded",()=>{
      renderPopular(venues);
      renderCatalog(venues);
      renderNearby(venues);
      initMap(venues);
    });

    // Stripe Top Up
    document.querySelector(".topup").addEventListener("click", async () => {
      const stripe = Stripe("pk_test_51SEZ8zGeqy6qTxmFcGlEuNjOCqIomJ33hECHcPt31HYvwPBRA0f9zCbKeIkigcoiZjsFvYl1udX7v2ssqVXR3iGP00dvjVDK37"); // public key

      // ‚ö†Ô∏è —Ç—É—Ç –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å input –¥–ª—è —Å—É–º–º—ã, –ø–æ–∫–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ–º 10 ‚Ç¨
      const response = await fetch("http://localhost:5000/create-checkout-session", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ amount_cents: 1000, user_id: 1 })
      });


      const session = await response.json();

      // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ Stripe Checkout
      const result = await stripe.redirectToCheckout({ sessionId: session.id });

      if (result.error) {
        alert(result.error.message);
      }
    });
  </script>
</body>
</html>
